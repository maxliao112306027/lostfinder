"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAllLostItems=exports.registerLostItem=void 0;var _db=_interopRequireDefault(require("../config/db.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}var registerLostItem=function(t,r){var n,o,a,s,i,l,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.body,o=n.name,a=n.description,s=n.location,i=n.lost_date,l=n.user_id,u=t.file?t.file.filename:null,e.next=5,regeneratorRuntime.awrap(_db.default.query("\n      INSERT INTO lost_items (name, description, location, lost_date, image)\n      VALUES (?, ?, ?, ?, ?)\n    ",[o,a,s,i,u,l]));case 5:r.json({message:"遺失物登記成功"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("❌ 登記失敗:",e.t0),r.status(500).json({error:"伺服器錯誤"});case 12:case"end":return e.stop()}},null,null,[[0,8]])};exports.registerLostItem=registerLostItem;var getAllLostItems=function(e,t){var r,n,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_db.default.query("SELECT * FROM lost_items ORDER BY created_at DESC"));case 3:r=e.sent,n=_slicedToArray(r,1),o=n[0],t.json(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.status(500).json({message:"查詢失敗",error:e.t0});case 12:case"end":return e.stop()}},null,null,[[0,9]])};exports.getAllLostItems=getAllLostItems;
//# sourceMappingURL=lostItemController.min.js.map
