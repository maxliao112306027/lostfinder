{"version":3,"sources":["lostItemController.js"],"names":["_db","_interopRequireDefault","require","registerLostItem","req","res","_req$body","name","description","location","lost_date","user_id","image","regeneratorRuntime","async","_context","prev","next","body","file","filename","awrap","db","query","json","message","t0","console","error","status","stop","_ref","_ref2","rows","_context2","sent","_slicedToArray"],"mappings":"4HAAA,IAAAA,IAAAC,uBAAAC,QAAA,ksBAEO,IAAMC,iBAAmB,SAAOC,EAAKC,GAAZ,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAC,KAAA,EAAAV,EAEgCF,EAAIc,KAAxDX,EAFoBD,EAEpBC,KAAMC,EAFcF,EAEdE,YAAaC,EAFCH,EAEDG,SAAUC,EAFTJ,EAESI,UAAWC,EAFpBL,EAEoBK,QAC1CC,EAAQR,EAAIe,KAAOf,EAAIe,KAAKC,SAAW,KAHjBL,EAAAE,KAAA,EAAAJ,mBAAAQ,MAFhCC,IAAAA,QAAAC,MAAA,qHAUO,CAAChB,EAAMC,EAAaC,EAAUC,EAAWE,EAAOD,KARvB,KAAA,EAU5BN,EAAImB,KAAK,CAAEC,QAAS,YAVQV,EAAAE,KAAA,GAAA,MAAA,KAAA,EAAAF,EAAAC,KAAA,EAAAD,EAAAW,GAAAX,EAAA,MAAA,GAY5BY,QAAQC,MAAM,UAAdb,EAAAW,IACArB,EAAIwB,OAAO,KAAKL,KAAK,CAAEI,MAAO,UAbF,KAAA,GAAA,IAAA,MAAA,OAAAb,EAAAe,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA,gDAAnB3B,IAAAA,gBAAmB,SAAnBA,EAAAA,GAAmB,IAAA4B,EAAAC,EAAAC,EAAA,OAAApB,mBAAAC,MAAA,SAAAoB,GAAA,OAAA,OAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,KAAA,EAAA,OAAAiB,EAAAlB,KAAA,EAAAkB,EAAAjB,KAAA,EAAAJ,mBAAAQ,MAmBLC,IAAAA,QAAGC,MAAM,sDAnBJ,KAAA,EAAAQ,EAAAG,EAAAC,KAAAH,EAAAI,eAAAL,EAAA,GAmBnBE,EAnBmBD,EAAA,GAAA3B,EAAAmB,KAAAS,GAAAC,EAAAjB,KAAA,GAAA,MAAA,KAAA,EAAAiB,EAAAlB,KAAA,EAAAkB,EAAAR,GAAAQ,EAAA,MAAA,GAAA7B,EAAAwB,OAAA,KAAAL,KAAA,CAAAC,QAAA,OAAAG,MAAAM,EAAAR,KAAA,KAAA,GAAA,IAAA,MAAA,OAAAQ,EAAAJ,SAAA,KAAA,KAAA,CAAA,CAAA,EAAA","file":"lostItemController.min.js","sourcesContent":["import db from '../config/db.js';\n\nexport const registerLostItem = async (req, res) => {\n  try {\n    const { name, description, location, lost_date, user_id } = req.body;\n    const image = req.file ? req.file.filename : null;\n\n    await db.query(`\n      INSERT INTO lost_items (name, description, location, lost_date, image)\n      VALUES (?, ?, ?, ?, ?)\n    `, [name, description, location, lost_date, image, user_id]);\n\n    res.json({ message: '遺失物登記成功' }); // ✅ 一定要有這行\n  } catch (err) {\n    console.error('❌ 登記失敗:', err);\n    res.status(500).json({ error: '伺服器錯誤' });\n  }\n};\n\nexport const getAllLostItems = async (req, res) => {\n    try {\n      const [rows] = await db.query('SELECT * FROM lost_items ORDER BY created_at DESC');\n      res.json(rows);\n    } catch (err) {\n      res.status(500).json({ message: '查詢失敗', error: err });\n    }\n  };\n  \n  "]}