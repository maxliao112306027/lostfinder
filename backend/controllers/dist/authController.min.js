"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.login=exports.signup=void 0;var _db=_interopRequireDefault(require("../config/db.js"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var signup=function(e,n){var s=e.body,o=s.username,u=s.password,r=s.email,t=s.phone;_db.default.query("\n    INSERT INTO user (username, password, email, phone, role, violation_count)\n    VALUES (?, ?, ?, ?, ?, ?)",[o,u,r,t,"user",0],function(e,s){if(e)return"ER_DUP_ENTRY"===e.code?n.status(400).json({message:"帳號或信箱已存在"}):n.status(500).json({message:"伺服器錯誤"});n.status(201).json({message:"註冊成功"})})};exports.signup=signup;var login=function(e,n){var s=e.body,o=s.username,u=s.password;_db.default.query("SELECT * FROM user WHERE username = ? AND password = ?",[o,u],function(e,s){return e?n.status(500).json({message:"伺服器錯誤"}):0===s.length?n.status(401).json({message:"帳號或密碼錯誤"}):void n.status(200).json({message:"登入成功",user:s[0]})})};exports.login=login;
//# sourceMappingURL=authController.min.js.map
